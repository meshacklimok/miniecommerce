{% extends 'base.html' %}
{% load static %}
{% block title %}Home{% endblock %}

{% block content %}
<div class="container-fluid p-0 position-relative">

  
    <!-- Featured Products Grid -->
    <h2 class="mb-4 text-center text-primary fw-bold mt-5" data-aos="fade-up">Featured Products</h2>
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 position-relative">
        {% for product in products %}
        <div class="col" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:'1' }}00">
            <div class="card h-100 border-0 shadow-sm hover-card-digital position-relative" style="background: rgba(0,0,0,0.6);">
                <svg class="circuit-bg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
                    <line x1="0" y1="0" x2="200" y2="200" stroke="#00fff7" stroke-width="0.2" />
                    <circle cx="100" cy="100" r="1" fill="#00fff7" />
                </svg>

                {% if product.main_image %}
                <img src="{{ product.main_image.url }}" class="card-img-top product-img" alt="{{ product.name }}" style="height:150px; object-fit:cover;">
                {% else %}
                <img src="{% static 'images/no-image.png' %}" class="card-img-top product-img" alt="No Image" style="height:150px; object-fit:cover;">
                {% endif %}
                <div class="card-body d-flex flex-column text-light rounded">
                    <h5 class="card-title fw-bold product-title">{{ product.name }}</h5>
                    <p class="card-text text-light text-truncate">{{ product.description }}</p>
                    <p class="card-text fw-bold text-success">Ksh {{ product.price }}</p>
                    <a href="{% url 'store:product_detail' product.id %}" class="btn btn-primary mt-auto fw-bold">View</a>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-center text-muted">No products available right now.</p>
        {% endfor %}
    </div>

</div>

<!-- Footer -->
<footer class="bg-dark text-center text-lg-start mt-5 py-4 text-light">
    <div class="container">
        <div class="text-center p-3">
            Â© 2025 Mini E-Shop | Designed by Meshack
        </div>
    </div>
</footer>
{% endblock %}

{% block extra_css %}
<style>
/* Hero Section */
.hero-banner-container {
    position: relative;
    width: 100%;
    min-height: 70vh;
    background: linear-gradient(135deg, #4e54c8, #8f94fb);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}
.hero-banner {
    color: #ffffff;
    animation: fadeIn 1.5s ease-in-out;
}
.hero-title {
    font-size: 3rem;
    font-weight: 700;
    text-shadow: 0 0 8px rgba(255,255,255,0.2);
}
.hero-subtitle {
    font-size: 1.3rem;
    margin-top: 1rem;
    color: rgba(255,255,255,0.9);
}
.btn-hover {
    background: linear-gradient(90deg,#ff7e5f,#feb47b);
    border: none;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.btn-hover:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(255,126,95,0.5);
}
.hero-overlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: radial-gradient(circle, rgba(255,255,255,0.05) 0%, transparent 70%);
    pointer-events: none;
    z-index: 1;
}
.floating-gadget {
    animation: floatGadget 4s ease-in-out infinite;
}
@keyframes fadeIn {
    0% { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
}
@keyframes floatGadget {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-15px) rotate(3deg); }
}

/* Products Grid */
.hover-card-digital {
    transition: all 0.3s ease;
    border-radius: 12px;
}
.hover-card-digital:hover {
    transform: translateY(-4px);
    box-shadow: 0 0 8px #00fff7;
}
.product-img {
    border-radius: 8px;
    transition: transform 0.3s ease;
}
.product-img:hover {
    transform: scale(1.02);
}
.product-title {
    color: #00fff7;
    text-shadow: 0 0 2px #00fff7;
}
.circuit-bg {
    position: absolute;
    top: -10px;
    left: -10px;
    width: calc(100% + 20px);
    height: calc(100% + 20px);
    opacity: 0.15;
    pointer-events: none;
    z-index: 0;
}

/* Responsive */
@media (max-width: 768px) {
    .hero-title { font-size: 2.2rem; }
    .hero-subtitle { font-size: 1rem; }
    .hero-banner { flex-direction: column; }
}
@media (max-width: 480px) {
    .hero-title { font-size: 1.8rem; }
    .hero-subtitle { font-size: 0.9rem; }
}
</style>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
AOS.init({ duration: 900, once: true });

// Hero Particles
const particleCanvas = document.getElementById('heroParticles');
const particleCtx = particleCanvas.getContext('2d');
particleCanvas.width = particleCanvas.offsetWidth;
particleCanvas.height = particleCanvas.offsetHeight;

let particles = [];
const particleCount = 50;
for (let i=0; i<particleCount; i++){
    particles.push({
        x: Math.random()*particleCanvas.width,
        y: Math.random()*particleCanvas.height,
        r: Math.random()*2 + 1,
        dx: (Math.random()-0.5)*0.3,
        dy: (Math.random()-0.5)*0.3
    });
}

function animateParticles(){
    particleCtx.clearRect(0,0,particleCanvas.width,particleCanvas.height);
    particles.forEach(p=>{
        particleCtx.beginPath();
        particleCtx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        particleCtx.fillStyle = "rgba(255,255,255,0.1)";
        particleCtx.fill();
        p.x += p.dx;
        p.y += p.dy;
        if(p.x<0||p.x>particleCanvas.width) p.dx*=-1;
        if(p.y<0||p.y>particleCanvas.height) p.dy*=-1;
    });
    requestAnimationFrame(animateParticles);
}
animateParticles();
window.addEventListener('resize', ()=>{
    particleCanvas.width = particleCanvas.offsetWidth;
    particleCanvas.height = particleCanvas.offsetHeight;
});

// Network Lines
const networkCanvas = document.getElementById('heroNetwork');
const nCtx = networkCanvas.getContext('2d');

function resizeNetworkCanvas() {
    networkCanvas.width = networkCanvas.offsetWidth;
    networkCanvas.height = networkCanvas.offsetHeight;
}
resizeNetworkCanvas();
window.addEventListener('resize', resizeNetworkCanvas);

const shopBtn = document.querySelector('.btn-hover');

function drawNetwork() {
    nCtx.clearRect(0,0,networkCanvas.width, networkCanvas.height);
    const points = particles;
    nCtx.strokeStyle = 'rgba(0,255,255,0.12)';
    nCtx.lineWidth = 1;

    points.forEach(p=>{
        points.forEach(p2=>{
            if(p!==p2){
                const dx = p.x - p2.x;
                const dy = p.y - p2.y;
                const dist = Math.sqrt(dx*dx + dy*dy);
                if(dist < 120){
                    const btnRect = shopBtn.getBoundingClientRect();
                    const btnX = btnRect.left + btnRect.width/2;
                    const btnY = btnRect.top + window.scrollY + btnRect.height/2;
                    const mx = btnX - p.x;
                    const my = btnY - p.y;
                    const mouseDist = Math.sqrt(mx*mx + my*my);
                    if(mouseDist < 150){
                        p.x += mx*0.002;
                        p.y += my*0.002;
                    }
                    nCtx.beginPath();
                    nCtx.moveTo(p.x, p.y);
                    nCtx.lineTo(p2.x, p2.y);
                    nCtx.stroke();
                }
            }
        });
    });
    requestAnimationFrame(drawNetwork);
}
drawNetwork();
</script>
{% endblock %}




